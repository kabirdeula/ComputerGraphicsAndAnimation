# Unit 02 : Two Dimensional and Three Dimensional Transformations

## Homogeneous Coordinate

### 1. Homogeneous representation for translation.

Therefore, P' = T(tx, ty)P

For inverse translation: T⁻¹(tx, ty) = T(-tx, -ty)

    [ x' ]   [ 1  0  x ] [ x ]
    [ y' ] = [ 0  1  y ] [ y ]
    [ h' ]   [ 0  0  1 ] [ h ]

Where h = 1

### 2. Homogeneous representation for rotation.

Therefore, P' = R(θ)P

For inverse rotation clockwise: R⁻¹(θ) = R(-θ) 

    [ x' ]   [ Cosθ  -Sinθ  0 ] [ x ]
    [ y' ] = [ Sinθ   Cosθ  0 ] [ y ]
    [ h' ]   [ 0      0     1 ] [ h ]

### 3. Homogeneous representation for scaling.

Therefore, P' = S(sx, sy)P

For inverse scaling: S⁻¹(sx, sy) = S(1/sx, 1/sy)

    [ x' ]   [ Sx  0  x ] [ x ]
    [ y' ] = [ 0  Sy  y ] [ y ]
    [ h' ]   [ 0   0  1 ] [ h ]

## General Pivot Point or Fixed Point Rotation:

To generate rotation about any selected pivot point (xᵣ, yᵣ) we need to perform following sequence of translate-rotate-translate operations:
    
1. Translate the object such that object is moved to the coordinate origin. Perform negative translation T(-tx, -ty).

2. Perform rotation.

3. Translate the object such that the object is moved back to its original position. Perform two translation T(tx, ty).

![Fixed Point Rotation](fixed-point-rotation.png)

## Reflection

It is used to produce a mirror image of an object. Mirror image for 2D object is generated by rotating an object 180° about the reflection axis.

1. Reflection about y = 0 i.e. x-axis

        X' = X
        Y' = Y

        In matrix form,

        [ x' ]   [ 1  0 0 ] [ x ]
        [ y' ] = [ 0 -1 0 ] [ y ]
        [ h' ]   [ 0  0 1 ] [ h ]
        
    ![Reflection about y = 0](reflection-x-axis.png)

2. Reflection about x = 0 i.e. y-axis

        X' = X
        Y' = Y

        In matrix form,

        [ x' ]   [ -1 0 0 ] [ x ]
        [ y' ] = [  0 1 0 ] [ y ]
        [ h' ]   [  0 0 1 ] [ h ]
        
    ![Reflection about x = 0](reflection-y-axis.png)

3. Reflection about the line passing through origin.

        X' = -X
        Y' = -Y

        In matrix form,

        [ x' ]   [ -1  0 0 ] [ x ]
        [ y' ] = [  0 -1 0 ] [ y ]
        [ h' ]   [  0  0 1 ] [ h ]
        
    ![Reflection through origin](reflection-through-origin.png)

4. Reflection of an object with respect to straight line y = x.

        X' = Y
        Y' = X

        In matrix form,

        [ x' ]   [ 0 1 0 ] [ x ]
        [ y' ] = [ 1 0 0 ] [ y ]
        [ h' ]   [ 0 0 1 ] [ h ]
        
    ![Reflection about y = x](reflection-y-x.png)

5. Reflection of an object with respect to straight line y = -x.

        X' = -Y
        Y' = -X

        In matrix form,

        [ x' ]   [  0 -1 0 ] [ x ]
        [ y' ] = [ -1  0 0 ] [ y ]
        [ h' ]   [  0  0 1 ] [ h ]
        
    ![Reflection about y = -x](reflection-y--x.png)

6. Reflection of an object with respect to arbitary axis.

        1. Translate the object so that reflection axis passes through origin i.e. T(0, -c).

        2. Rotate object such that reflection axis coincides with one of the coordinate axis, in this case x-axis i.e. apply R(-θ).

        3. Reflect the object with respect to x-axis i.e. apply R x-axis.

        4. Rotate back so that reflection axis regain its initial slope i.e. apply R(θ).

        5. Translate back to return the object to its original position i,e. apply T(0, c).

    Net Transformation = T(0, c) ・ R x-axis ・ R(-θ) ・ T(0, -c).

## Three Dimensioanl Transformation

### Translation

        x' = x + tx
        y' = y + ty
        z' = z + tz

        [ x' ]    [ 1 0 0 tx ] [ x ]
        [ y' ] __ [ 0 1 0 ty ] [ y ]
        [ z' ] __ [ 0 0 1 tz ] [ z ]
        [ h' ]    [ 0 0 0  1 ] [ h ]

### Rotation

1. About z-axis

        x' = xCosθ - ySinθ
        y' = xSinθ + yCosθ
        z' = z

        [ x' ]    [ cosθ  -sinθ  0  0 ] [ x ]
        [ y' ] __ [ sinθ   cosθ  0  0 ] [ y ]
        [ z' ] __ [ 0      0     1  0 ] [ z ]
        [ h' ]    [ 0      0     0  1 ] [ h ]

2. About x-axis

        y' = yCosθ - zSinθ
        z' = ySinθ + zCosθ
        x' = x

        [ x' ]    [ 1  0      0     0 ] [ x ]
        [ y' ] __ [ 0  cosθ  -sinθ  0 ] [ y ]
        [ z' ] __ [ 0  sinθ   cosθ  0 ] [ z ]
        [ h' ]    [ 0  0      0     1 ] [ h ]

3. About y-axis

        z' = zCosθ - xSinθ
        x' = zSinθ + xCosθ
        y' = y

        [ x' ]    [ cosθ  0  -sinθ  0 ] [ x ]
        [ y' ] __ [ 0     1   0     0 ] [ y ]
        [ z' ] __ [ sinθ  0   cosθ  0 ] [ z ]
        [ h' ]    [ 0     0   0     1 ] [ h ]

#### General 3D Rotation

1. Rotation about an axis parallel to any of coordinate axis:
    
    - Translate the object such that rotation axis concide with parallel axis.
    - Perform specified rotation about axis.
    - Translate the object such that rotation axis moves to original position.

    Net Transformation = T(tx, ty, tz) ・ Rx or y or z ・ T(-tx, -ty, -tz)

2. Rotation about an axis not parallel to any of coordinate axis:
    
    - Translate the object such that rotation axis passes through origin.
    - Rotate on x-axis.
    - Rotate on specified axis.
    - Inverse rotation on x-axis.
    - Retranslate.

    Net Transformation = T(tx, ty, tz) ・ R(θ)x-axis ・ R(-θ)x-axis・ T(-tx, -ty, -tz)

### Reflection

1. through x-y plane:

$$Txy = \begin{bmatrix}
1 & 0 &  0 & 0 \\
0 & 1 &  0 & 0 \\
0 & 0 & -1 & 0 \\
0 & 0 &  0 & 1 \\
\end{bmatrix}$$

2. through y-z plane:

$$Tyz = \begin{bmatrix}
-1 & 0 & 0 & 0 \\
 0 & 1 & 0 & 0 \\
 0 & 0 & 1 & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix}$$

3. through z-x plane:

$$Tzx = \begin{bmatrix}
1 &  0 & 0 & 0 \\
0 & -1 & 0 & 0 \\
0 &  0 & 1 & 0 \\
0 &  0 & 0 & 1 \\
\end{bmatrix}$$

## Two-Dimensional Viewing (2D viewing):
It is the process or formal mechanism for displaying views of a picture on an output device. Typically, a graphic package allows a user to specify which part of a defined picture is to be
displayed and where that part is to be placed on the display device. A user can select single area for display or several areas can be selected for simultaneous display or for an animated
panning sequence across a scene. The picture part within the selected areas are then mapped onto specific area of the device coordinate.

Following coordinate are used to display 2D Scene in a screen:

- Modeling coordinate system is used to define coordinates of each object.

- World coordinate system are used to define the picture or to organize the individual objects (points, lines, circle etc) into a scene. A scene is made up of a collection of objects which makes up world that we want to view and the coordinates that we use to define the scene are called world coordinates.

- Viewing coordinate system used to define particular view of a 2D scene. A view is selected by specifying a subarea of the total picture area. Translation, scaling and rotation of the window will generate a different view of the scene.

- Normalized viewing coordinates between 0 and 1. This is used
to make the viewing process independent of the output device (monitor, mobile, hardcopy device etc.)

- Device coordinate are used to define coordinates in an output device. Device coordinate are integers within the range (0, 0) to (xmax, ymax) for particular output device.

## Steps for carrying out the viewing transformation:

- First, scene is constructed in world coordinate by using output primitives.

- A particular orientation for the window have to be obtained. For this 2D viewing coordinate system in the world coordinate plane can be set up and define a window in viewing coordinate system. For setting up the orientation for rectangular windows the viewing coordinate reference frame can be used.

- Once the viewing reference frame is established then picture description from world coordinate is transformed to viewing coordinates.

- Then we define a viewport in normalized coordinate in the range from 0 to 1 and map the viewing coordinate description of the scene to normalized coordinates.

- In final step, all those parts of the picture that lie outside the viewport are clipped and the contents of the viewports are transferred to device coordinate.

## Window:
A world coordinate are selected for display is called a window i.e. it is the section of the 2D scene that is selected for viewing. It defines what is to be viewed. A window can be specified by four world coordinates: xwmin, xwmax, ywmin and ywmax.

## Viewport:
An area on a display device to which a window is mapped is called a viewport. The viewport defines where on an output device selected part will be displayed. A view port can be described by four device coordinates: xvmin, xvmax, yvmin and yvmax.

## Windows To Viewport Coordinate Transformation:
It is used to find out reference or relative point of device coordinate as that of world coordinate. It is also used for transferring world coordinate to normalized coordinate following process is used.

A window can be specified by four world coordinates: xwmin, xwmax, ywmin and ywmax.
Similarly, a viewport can be described by four device coordinates: xvmin, xvmax, yvmin and yvmax.

For x-coordinate,

$$\frac{x_w - x_{wmin}}{x_{wmax} - x_{wmin}} 
=
\frac{x_v - x_{vmin}}{x_{vmax} - x_{vmin}}
\cdots i \\
\frac{(x_w - x_{wmin})(x_{vmax} - x_{vmin})}{x_{wmax} - x_{wmin}} + x_{vmin}
=
x_v
\cdots ii \\

x_v = (x_w - x_{wmin}) \times S_x + x_{vmin} \cdots iii$$

For y-coordinate,

$$\frac{y_w - y_{wmin}}{y_{wmax} - y_{wmin}} 
=
\frac{y_v - y_{vmin}}{y_{vmax} - y_{vmin}}
\cdots i \\
\frac{(y_w - y_{wmin})(y_{vmax} - y_{vmin})}{y_{wmax} - y_{wmin}} + y_{vmin}
=
y_v
\cdots ii \\

y_v = (y_w - y_{wmin}) \times S_y + y_{vmin} \cdots iii$$

#### For normalization

- Translate the object along with window such that lower left corner is at origin. Apply T(-xwmin, -ywmin).

- Scale the object with window such that window have same dimension as that as viewport. Apply S(sx, sy).

- Retranslate to move the viewport to its original position. Apply T(xvmin, yvmin).

    NT = T(xvmin, yvmin) ・ S(Sx, Sy) ・ T(-xwmin, -ywmin)
    $$
    Sx = \frac{x_{vmax} - x_{vmin}}{x_{wmax} - x_{wmin}}\\
    Sy = \frac{y_{vmax} - y_{vmin}}{y_{wmax} - y_{wmin}}